{
  "policy": {
    "minimum-supported-ruby-version": "2.7",
    "minimum-supported-rust-version": "1.71"
  },
  "zig": {
    "configure-overrides": {
      "ac_cv_func_setpgrp_void": "yes",
      "ac_cv_func_getpgrp_void": "yes",
      "ac_cv_working_memcmp": "yes",
      "rb_cv_binary_elf": "yes",
      "rb_cv_broken_backtrace": "no"
    },
    "config-h-fixups": [
      "#define RUBY_FUNCTION_NAME_STRING __func__",
      "#define RUBY_SYMBOL_EXPORT_BEGIN _Pragma(\"GCC visibility push(default)\")",
      "#define RUBY_SYMBOL_EXPORT_END _Pragma(\"GCC visibility pop\")",
      "#define RUBY_FUNC_EXPORTED __attribute__ ((__visibility__(\"default\"))) extern",
      "#define RUBY_FUNC_NONNULL(n,x) __attribute__ ((__nonnull__(n))) x",
      "#define CONSTFUNC(x) __attribute__ ((__const__)) x",
      "#define PUREFUNC(x) __attribute__ ((__pure__)) x",
      "#define NORETURN(x) __attribute__ ((__noreturn__)) x",
      "#define DEPRECATED(x) __attribute__ ((__deprecated__)) x",
      "#define DEPRECATED_BY(n,x) __attribute__ ((__deprecated__(\"by \"#n))) x",
      "#define NOINLINE(x) __attribute__ ((__noinline__)) x",
      "#define ALWAYS_INLINE(x) __attribute__ ((__always_inline__)) x",
      "#define NO_SANITIZE(san, x) __attribute__ ((__no_sanitize__(san))) x",
      "#define NO_SANITIZE_ADDRESS(x) __attribute__ ((__no_sanitize_address__)) x",
      "#define WARN_UNUSED_RESULT(x) __attribute__ ((__warn_unused_result__)) x",
      "#define MAYBE_UNUSED(x) __attribute__ ((__unused__)) x",
      "#define ERRORFUNC(mesg,x) __attribute__ ((__error__ mesg)) x",
      "#define WARNINGFUNC(mesg,x) __attribute__ ((__warning__ mesg)) x",
      "#define WEAK(x) __attribute__ ((__weak__)) x",
      "#define HAVE_FUNC_WEAK 1",
      "#define FUNC_CDECL(x) __attribute__ ((__cdecl__)) x",
      "#define HAVE___BUILTIN_UNREACHABLE 1",
      "#define HAVE__ALIGNOF 1",
      "#define ENUM_OVER_INT 1",
      "#define RB_THREAD_LOCAL_SPECIFIER _Thread_local",
      "#define IOCTL_REQ_TYPE unsigned long",
      "#define NUM2IOCTLREQ(num) NUM2ULONG(num)",
      "#define PRI_LL_PREFIX \"ll\"",
      "#define PRI_SIZE_PREFIX \"z\"",
      "#define PRI_PTRDIFF_PREFIX \"t\"",
      "#define NO_ADDRESS_SAFETY_ANALYSIS(x) __attribute__ ((__no_address_safety_analysis__)) x"
    ]
  },
  "toolchains": [
    {
      "ruby-platform": "arm-linux",
      "rust-target": "arm-unknown-linux-gnueabihf",
      "dockerfile": "docker/Dockerfile.arm-linux",
      "rake-compiler-dock": {
        "cc": "arm-linux-gnueabihf-gcc"
      },
      "docker-platform": "linux/arm/v7",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "arm-linux-gnueabihf", "glibc-version": "2.17" }
    },
    {
      "ruby-platform": "aarch64-linux",
      "aliases": ["aarch64-linux-gnu", "aarch64-unknown-linux-gnu"],
      "rust-target": "aarch64-unknown-linux-gnu",
      "dockerfile": "docker/Dockerfile.aarch64-linux",
      "rake-compiler-dock": {
        "cc": "aarch64-linux-gnu-gcc"
      },
      "docker-platform": "linux/arm64/v8",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "aarch64-linux-gnu", "glibc-version": "2.17" }
    },
    {
      "ruby-platform": "aarch64-linux-musl",
      "rust-target": "aarch64-unknown-linux-musl",
      "dockerfile": "docker/Dockerfile.aarch64-linux-musl",
      "rake-compiler-dock": {
        "cc": "aarch64-linux-musl-gcc"
      },
      "docker-platform": "linux/arm64/v8",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "aarch64-linux-musl", "glibc-version": null }
    },
    {
      "ruby-platform": "arm64-darwin",
      "rust-target": "aarch64-apple-darwin",
      "dockerfile": "docker/Dockerfile.arm64-darwin",
      "rake-compiler-dock": {
        "cc": "aarch64-apple-darwin-clang"
      },
      "docker-platform": "linux/arm64/v8",
      "supported": true,
      "zig": { "supported": false }
    },
    {
      "ruby-platform": "x64-mingw-ucrt",
      "rust-target": "x86_64-pc-windows-gnu",
      "dockerfile": "docker/Dockerfile.x64-mingw-ucrt",
      "rake-compiler-dock": {
        "cc": "x86_64-windows-gnu-gcc"
      },
      "docker-platform": "linux/amd64",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "x86_64-w64-mingw32", "glibc-version": null }
    },
    {
      "ruby-platform": "aarch64-mingw-ucrt",
      "rust-target": "aarch64-pc-windows-gnullvm",
      "dockerfile": "docker/Dockerfile.aarch64-mingw-ucrt",
      "rake-compiler-dock": {
        "cc": "aarch64-w64-mingw32-clang"
      },
      "docker-platform": "linux/amd64",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "aarch64-w64-mingw32", "glibc-version": null }
    },
    {
      "ruby-platform": "x64-mingw32",
      "rust-target": "x86_64-pc-windows-gnu",
      "dockerfile": "docker/Dockerfile.x64-mingw32",
      "rake-compiler-dock": {
        "cc": "x86_64-windows-gnu-gcc"
      },
      "docker-platform": "linux/amd64",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "x86_64-w64-mingw32", "glibc-version": null }
    },
    {
      "ruby-platform": "x86-linux",
      "rust-target": "i686-unknown-linux-gnu",
      "dockerfile": "docker/Dockerfile.x86-linux",
      "rake-compiler-dock": {
        "cc": "i686-redhat-linux-gcc"
      },
      "docker-platform": "linux/i386",
      "supported": false,
      "zig": { "supported": true, "autoconf-host": "i686-linux-gnu", "glibc-version": "2.17" }
    },
    {
      "ruby-platform": "x86-mingw32",
      "rust-target": "i686-pc-windows-gnu",
      "dockerfile": "docker/Dockerfile.x86-mingw32",
      "rake-compiler-dock": {
        "cc": "i686-w64-mingw32-gcc"
      },
      "docker-platform": "linux/i386",
      "supported": false,
      "zig": { "supported": true, "autoconf-host": "i686-w64-mingw32", "glibc-version": null }
    },
    {
      "ruby-platform": "x86_64-darwin",
      "rust-target": "x86_64-apple-darwin",
      "dockerfile": "docker/Dockerfile.x86_64-darwin",
      "rake-compiler-dock": {
        "cc": "x86_64-apple-darwin-clang"
      },
      "docker-platform": "linux/amd64",
      "supported": true,
      "zig": { "supported": false }
    },
    {
      "ruby-platform": "x86_64-linux",
      "aliases": ["x86_64-linux-gnu", "x86_64-unknown-linux-gnu"],
      "rust-target": "x86_64-unknown-linux-gnu",
      "dockerfile": "docker/Dockerfile.x86_64-linux",
      "rake-compiler-dock": {
        "cc": "x86_64-redhat-linux-gcc"
      },
      "docker-platform": "linux/amd64",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "x86_64-linux-gnu", "glibc-version": "2.17" }
    },
    {
      "ruby-platform": "x86_64-linux-musl",
      "rust-target": "x86_64-unknown-linux-musl",
      "dockerfile": "docker/Dockerfile.x86_64-linux-musl",
      "rake-compiler-dock": {
        "cc": "x86_64-unknown-linux-musl-gcc"
      },
      "docker-platform": "linux/amd64",
      "supported": true,
      "zig": { "supported": true, "autoconf-host": "x86_64-linux-musl", "glibc-version": null }
    }
  ]
}
