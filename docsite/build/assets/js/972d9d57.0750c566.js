"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[66],{1039:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"introduction","title":"Introduction","description":"Welcome to the rb-sys guide. This book will show you how to build Ruby extensions in Rust that are both powerful and","source":"@site/docs/introduction.mdx","sourceDirName":".","slug":"/","permalink":"/docs/","draft":false,"unlisted":false,"editUrl":"https://github.com/oxidize-rb/rb-sys/tree/main/docsite/docs/introduction.mdx","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"id":"introduction","title":"Introduction","slug":"/","sidebar_position":1},"sidebar":"docsSidebar","next":{"title":"Prerequisites and Installation","permalink":"/docs/getting-started"}}');var t=s(4848),r=s(8453);const o={id:"introduction",title:"Introduction",slug:"/",sidebar_position:1},l="Introduction",d={},c=[{value:"Key Features",id:"key-features",level:2},{value:"Why Rust for Ruby Extensions?",id:"why-rust-for-ruby-extensions",level:2},{value:"The rb-sys Project Ecosystem",id:"the-rb-sys-project-ecosystem",level:2},{value:"Comparison with Traditional C Extensions",id:"comparison-with-traditional-c-extensions",level:2},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Supported Toolchains",id:"supported-toolchains",level:2},{value:"Dependencies",id:"dependencies",level:2},{value:"Getting Help",id:"getting-help",level:2},{value:"Contributing to this documentation",id:"contributing-to-this-documentation",level:2},{value:"License",id:"license",level:2},{value:"Next Steps",id:"next-steps",level:2}];function a(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,t.jsx)(n.p,{children:"Welcome to the rb-sys guide. This book will show you how to build Ruby extensions in Rust that are both powerful and\nreliable."}),"\n",(0,t.jsxs)(n.p,{children:["The primary goal of ",(0,t.jsx)(n.code,{children:"rb-sys"})," is to make building native Ruby extensions in Rust ",(0,t.jsx)(n.strong,{children:"easier"})," than it would be in C. If\nit's not easy, it's a bug."]}),"\n",(0,t.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Battle-tested Rust bindings for the Ruby C API"}),"\n",(0,t.jsx)(n.li,{children:"Support for Ruby 2.6+"}),"\n",(0,t.jsx)(n.li,{children:"Support for all major platforms (Linux, macOS, Windows)"}),"\n",(0,t.jsx)(n.li,{children:"Cross-compilation support for gems"}),"\n",(0,t.jsxs)(n.li,{children:["Integration with ",(0,t.jsx)(n.code,{children:"rake-compiler"})]}),"\n",(0,t.jsx)(n.li,{children:"Test helpers for Ruby extensions"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"why-rust-for-ruby-extensions",children:"Why Rust for Ruby Extensions?"}),"\n",(0,t.jsx)(n.p,{children:"Ruby extensions have traditionally been written in C, requiring manual memory management and careful handling of Ruby's\ninternals. This approach is error-prone and often results in security vulnerabilities, memory leaks, and crashes."}),"\n",(0,t.jsx)(n.admonition,{type:"note",children:(0,t.jsx)(n.p,{children:"While C extensions offer flexibility and minimal dependencies, Rust extensions provide a superior developer experience\nwith improved safety guarantees and access to a rich ecosystem of libraries."})}),"\n",(0,t.jsx)(n.p,{children:"Rust offers a compelling alternative with several advantages:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Memory safety without garbage collection"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Strong type system that catches errors at compile time"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Modern language features like pattern matching and traits"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Access to the vast Rust ecosystem via crates.io"})}),"\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.strong,{children:"Strong tooling for testing, documentation, and deployment"})}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsx)(n.p,{children:"Importantly, performance should not be the sole motivation for using Rust. With Ruby's YJIT compiler, pure Ruby code is\nnow faster than ever. Instead, consider Rust when you need memory safety, type safety, or want to leverage the rich Rust\necosystem's capabilities."})}),"\n",(0,t.jsx)(n.h2,{id:"the-rb-sys-project-ecosystem",children:"The rb-sys Project Ecosystem"}),"\n",(0,t.jsx)(n.p,{children:"rb-sys consists of several components working together:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"rb-sys crate"}),": Provides low-level Rust bindings to Ruby's C API"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"rb_sys gem"}),": Handles the Ruby side of extension compilation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Magnus"}),": A higher-level, ergonomic API for Rust/Ruby interoperability"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"rb-sys-dock"}),": Docker-based cross-compilation tooling"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"GitHub Actions"}),": Setup and cross-compilation automation for CI workflows"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsx)(n.p,{children:"Most developers will use the Magnus API when building their extensions, as it provides a much more ergonomic interface\nthan using rb-sys directly."})}),"\n",(0,t.jsx)(n.p,{children:"Here's how these components interact when building a typical Ruby gem with Rust:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"Your Ruby Code (.rb files)\n       \u2193\n  Your Rust Code (.rs files)\n       \u2193\n   Magnus API\n       \u2193\n  rb-sys crate\n       \u2193\nRuby C API Bindings\n       \u2193\n  Ruby VM\n"})}),"\n",(0,t.jsx)(n.p,{children:"During compilation:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"  Your gem's extconf.rb\n       \u2193\n  rb_sys gem's create_rust_makefile\n       \u2193\n  Cargo build process using rb-sys crate\n       \u2193\n  Native extension (.so/.bundle/.dll)\n"})}),"\n",(0,t.jsx)(n.h2,{id:"comparison-with-traditional-c-extensions",children:"Comparison with Traditional C Extensions"}),"\n",(0,t.jsx)(n.p,{children:"Let's compare writing extensions in Rust versus C:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Aspect"}),(0,t.jsx)(n.th,{children:"C Extensions"}),(0,t.jsx)(n.th,{children:"Rust Extensions"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Memory Safety"})}),(0,t.jsx)(n.td,{children:"Manual memory management"}),(0,t.jsx)(n.td,{children:"Guaranteed memory safety at compile time"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Type Safety"})}),(0,t.jsx)(n.td,{children:"Weak typing, runtime errors"}),(0,t.jsx)(n.td,{children:"Strong static typing, compile-time checks"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"API Ergonomics"})}),(0,t.jsx)(n.td,{children:"Low-level C API"}),(0,t.jsx)(n.td,{children:"High-level Magnus API"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Development Speed"})}),(0,t.jsx)(n.td,{children:"Slower, more error-prone"}),(0,t.jsx)(n.td,{children:"Faster, safer development cycle"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Ecosystem Access"})}),(0,t.jsx)(n.td,{children:"Limited to C libraries"}),(0,t.jsx)(n.td,{children:"Full access to Rust crates"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Debugging"})}),(0,t.jsx)(n.td,{children:"Harder to debug memory issues"}),(0,t.jsx)(n.td,{children:"Easier to debug with Rust's safety guarantees"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:(0,t.jsx)(n.strong,{children:"Cross-Compilation"})}),(0,t.jsx)(n.td,{children:"Complex manual configuration"}),(0,t.jsx)(n.td,{children:"Simplified with rb-sys-dock"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:"While C extensions offer flexibility and minimal dependencies, Rust extensions provide a superior developer experience\nwith improved safety guarantees and access to a rich ecosystem of libraries."}),"\n",(0,t.jsx)(n.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,t.jsx)(n.p,{children:"These gems demonstrate rb-sys in action:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/yoshoku/lz4-ruby",children:"lz4-ruby"})," - LZ4 compression library with rb-sys"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/bytecodealliance/wasmtime-rb",children:"wasmtime-rb"})," - WebAssembly runtime with rb-sys and Magnus"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/oxidize-rb/oxi-test",children:"oxi-test"})," - Canonical example of how to use rb-sys (minimal, fully tested,\ncross-compiled)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"https://github.com/oxidize-rb/blake3-ruby",children:"blake3-ruby"})," - Fast cryptographic hash function with full cross-platform\nsupport"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"supported-toolchains",children:"Supported Toolchains"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ruby: 2.6+ (for full compatibility with Rubygems)"}),"\n",(0,t.jsx)(n.li,{children:"Rust: 1.65+"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"dependencies",children:"Dependencies"}),"\n",(0,t.jsx)(n.p,{children:"To build a Ruby extension in Rust, you'll need:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Ruby development headers (usually part of ruby-dev packages)"}),"\n",(0,t.jsx)(n.li,{children:"Rust (via rustup)"}),"\n",(0,t.jsxs)(n.li,{children:["libclang (for bindgen)","\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["On macOS: ",(0,t.jsx)(n.code,{children:"brew install llvm"})]}),"\n",(0,t.jsxs)(n.li,{children:["On Linux: ",(0,t.jsx)(n.code,{children:"apt-get install libclang-dev"})]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"getting-help",children:"Getting Help"}),"\n",(0,t.jsxs)(n.p,{children:["If you have questions, please join our ",(0,t.jsx)(n.a,{href:"https://join.slack.com/t/oxidize-rb/shared_invite/zt-16zv5tqte-Vi7WfzxCesdo2TqF_RYBCw",children:"Slack channel"})," or ",(0,t.jsx)(n.a,{href:"https://github.com/oxidize-rb/rb-sys/issues",children:"open an issue on GitHub"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"contributing-to-this-documentation",children:"Contributing to this documentation"}),"\n",(0,t.jsxs)(n.p,{children:["This documentation is open source! Find a typo? Did we overlook something? ",(0,t.jsx)(n.a,{href:"https://github.com/oxidize-rb/rb-sys",children:(0,t.jsx)(n.strong,{children:"Send us a pull request!"})}),". Help wanted!"]}),"\n",(0,t.jsx)(n.h2,{id:"license",children:"License"}),"\n",(0,t.jsx)(n.p,{children:"rb-sys is licensed under either:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Apache License, Version 2.0"}),"\n",(0,t.jsx)(n.li,{children:"MIT license"}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"at your option."}),"\n",(0,t.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Proceed to ",(0,t.jsx)(n.a,{href:"getting-started",children:"Getting Started"})," to set up your development environment."]}),"\n",(0,t.jsxs)(n.li,{children:["Try the ",(0,t.jsx)(n.a,{href:"quick-start",children:"Quick Start"})," to build your first extension."]}),"\n",(0,t.jsxs)(n.li,{children:["Explore core concepts in ",(0,t.jsx)(n.a,{href:"build-process",children:"Build Process"})," and ",(0,t.jsx)(n.a,{href:"memory-management",children:"Memory Management & Safety"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["Learn advanced topics like ",(0,t.jsx)(n.a,{href:"cross-platform",children:"Cross-Platform Development"})," and ",(0,t.jsx)(n.a,{href:"testing",children:"Testing Extensions"}),"."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>o,x:()=>l});var i=s(6540);const t={},r=i.createContext(t);function o(e){const n=i.useContext(r);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);