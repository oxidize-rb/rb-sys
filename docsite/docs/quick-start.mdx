---
id: quick-start
title: Quick Start
sidebar_position: 3
keywords: [quick start, tutorial, first extension, ruby rust, example]
description: Build your first Ruby extension with Rust. Step-by-step tutorial with a real working example.
---

# Quick Start: Your First Extension

**Time:** 15 minutes | **Difficulty:** Beginner | **Prerequisites:** [Installation complete](getting-started)

Let's build a working Ruby gem with Rust. We'll create a string manipulation library that showcases Rust's speed and
safety.

## What We're Building

A `FastStrings` gem that provides:

- String reversal
- Safe Unicode handling

<div className="demo-preview">

```ruby
require "fast_strings"

FastStrings.reverse("Hello World!")
# => "!dlroW olleH"
```

</div>

## Step 1: Create Your Gem

```bash
# Create a new gem with Rust support
bundle gem --ext=rust fast_strings
cd fast_strings
```

<details>
<summary>What did Bundler create?</summary>

```
fast_strings/
├── Gemfile              # Ruby dependencies
├── fast_strings.gemspec # Gem metadata
├── Rakefile             # Build tasks
├── ext/fast_strings/    # Rust extension
│   ├── Cargo.toml       # Rust dependencies
│   ├── extconf.rb       # Build configuration
│   └── src/
│       └── lib.rs        # Rust code
└── lib/
    └── fast_strings.rb  # Ruby wrapper
```

</details>

## Step 2: Write Your Rust Code

Replace the default code with our fast string implementation:

```rust
// ext/fast_strings/src/lib.rs
use magnus::{function, prelude::*, Error, Ruby};
use unicode_segmentation::UnicodeSegmentation;

/// Reverses a string preserving Unicode grapheme clusters
fn reverse_string(input: String) -> String {
    input
        .graphemes(true)  // true = extended grapheme clusters
        .rev()
        .collect()
}

#[magnus::init]
fn init(ruby: &Ruby) -> Result<(), Error> {
    let module = ruby.define_module("FastStrings")?;

    // Define our module methods
    module.define_singleton_method("reverse", function!(reverse_string, 1))?;

    Ok(())
}
```

### Add the Unicode dependency:

```toml
# ext/fast_strings/Cargo.toml
[package]
name = "fast_strings"
version = "0.1.0"
edition = "2021"

[dependencies]
magnus = { version = "0.7" }
unicode-segmentation = "1.10"

[lib]
name = "fast_strings"
crate-type = ["cdylib"]
```

## Step 3: Build Your Extension

```bash
# Install dependencies and compile
bundle install
bundle exec rake compile
```

<details>
<summary>Compilation Steps</summary>

1. Ruby reads `extconf.rb`
2. `create_rust_makefile` generates a Makefile
3. Cargo compiles your Rust code
4. The compiled library is copied to `lib/fast_strings/`

</details>

## Step 4: Add Tests

Create a test file to verify our implementation:

```ruby
# test/test_fast_strings.rb
require "test_helper"

class TestFastStrings < Minitest::Test
  def test_reverse_simple
    assert_equal "dlrow olleh", FastStrings.reverse("hello world")
  end

  def test_reverse_unicode
    assert_equal "!dlroW olleH", FastStrings.reverse("Hello World!")
  end
end
```

## Step 5: Run Tests

```bash
# Run the tests
bundle exec rake test
```

## Step 6: Try It Yourself

```bash
# Open an interactive console
bundle exec bin/console
```

```ruby
# Try the reverse function
FastStrings.reverse("Hello, World!")
# => "!dlroW ,olleH"
```

## Publishing Your Gem

Ready to share your creation with the world?

```bash
# Update version in version.rb
# Update gemspec with description and homepage

# Build the gem
gem build fast_strings.gemspec

# Push to RubyGems.org
gem push fast_strings-0.1.0.gem
```

## What You Learned

- Created a Ruby gem with a Rust extension
- Wrote safe, fast Rust code
- Handled Unicode correctly
- Added tests

## Continue Learning

<div className="next-steps-grid">

<div className="next-step-card">

### [Core Concepts](core-concepts)

Understand how rb-sys bridges Ruby and Rust

</div>

<div className="next-step-card">

### [Project Setup](project-setup)

Structure larger projects properly

</div>

<div className="next-step-card">

### [Working with Ruby Objects](working-with-ruby-objects)

Manipulate arrays, hashes, and more

</div>

</div>
