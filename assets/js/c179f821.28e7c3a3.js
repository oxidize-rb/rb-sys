"use strict";(self.webpackChunkdocsite=self.webpackChunkdocsite||[]).push([[1110],{6387:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>u,frontMatter:()=>l,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"quick-start","title":"Quick Start","description":"Build your first Ruby extension with Rust. Step-by-step tutorial with a real working example.","source":"@site/docs/quick-start.mdx","sourceDirName":".","slug":"/quick-start","permalink":"/docs/quick-start","draft":false,"unlisted":false,"editUrl":"https://github.com/oxidize-rb/rb-sys/tree/main/docsite/docs/quick-start.mdx","tags":[],"version":"current","lastUpdatedBy":"Ian Ker-Seymer","lastUpdatedAt":1764825964000,"sidebarPosition":3,"frontMatter":{"id":"quick-start","title":"Quick Start","sidebar_position":3,"keywords":["quick start","tutorial","first extension","ruby rust","example"],"description":"Build your first Ruby extension with Rust. Step-by-step tutorial with a real working example."},"sidebar":"docsSidebar","previous":{"title":"Getting Started","permalink":"/docs/getting-started"},"next":{"title":"Core Concepts","permalink":"/docs/core-concepts"}}');var r=t(4848),i=t(8453);const l={id:"quick-start",title:"Quick Start",sidebar_position:3,keywords:["quick start","tutorial","first extension","ruby rust","example"],description:"Build your first Ruby extension with Rust. Step-by-step tutorial with a real working example."},a="Quick Start: Your First Extension",o={},d=[{value:"What We&#39;re Building",id:"what-were-building",level:2},{value:"Step 1: Create Your Gem",id:"step-1-create-your-gem",level:2},{value:"Step 2: Write Your Rust Code",id:"step-2-write-your-rust-code",level:2},{value:"Why this approach?",id:"why-this-approach",level:3},{value:"Step 3: Build and Test",id:"step-3-build-and-test",level:2},{value:"Step 4: Try It in the Console",id:"step-4-try-it-in-the-console",level:2},{value:"What You&#39;ve Learned",id:"what-youve-learned",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"quick-start-your-first-extension",children:"Quick Start: Your First Extension"})}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Time:"})," 15 minutes | ",(0,r.jsx)(n.strong,{children:"Difficulty:"})," Beginner | ",(0,r.jsx)(n.strong,{children:"Prerequisites:"})," ",(0,r.jsx)(n.a,{href:"getting-started",children:"Installation complete"})]}),"\n",(0,r.jsxs)(n.p,{children:["Let's build a working Ruby gem with a Rust-powered native extension. We'll create a ",(0,r.jsx)(n.code,{children:"FastStrings"})," gem that showcases Rust's performance and safety for string manipulation."]}),"\n",(0,r.jsx)(n.h2,{id:"what-were-building",children:"What We're Building"}),"\n",(0,r.jsxs)(n.p,{children:["A ",(0,r.jsx)(n.code,{children:"FastStrings"})," gem that provides a fast, Unicode-aware string reversal method."]}),"\n",(0,r.jsx)("div",{className:"demo-preview",children:(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'require "fast_strings"\n\nFastStrings.reverse("Hello, world! \ud83e\udd80")\n# => "\ud83e\udd80 !dlrow ,olleH"\n'})})}),"\n",(0,r.jsx)(n.h2,{id:"step-1-create-your-gem",children:"Step 1: Create Your Gem"}),"\n",(0,r.jsx)(n.p,{children:"We'll use Bundler to generate the gem skeleton with Rust support."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle gem --ext=rust fast_strings\ncd fast_strings\n"})}),"\n",(0,r.jsxs)(n.p,{children:["This creates a standard gem structure with an ",(0,r.jsx)(n.code,{children:"ext/fast_strings"})," directory for our Rust code."]}),"\n",(0,r.jsx)(n.h2,{id:"step-2-write-your-rust-code",children:"Step 2: Write Your Rust Code"}),"\n",(0,r.jsxs)(n.p,{children:["Replace the placeholder code in ",(0,r.jsx)(n.code,{children:"ext/fast_strings/src/lib.rs"})," with our string reversal implementation."]}),"\n",(0,r.jsxs)(n.p,{children:["We will use the ",(0,r.jsx)(n.code,{children:"magnus"})," library for high-level, safe bindings to Ruby, and ",(0,r.jsx)(n.code,{children:"unicode-segmentation"})," to correctly handle Unicode grapheme clusters."]}),"\n",(0,r.jsxs)(n.p,{children:["First, add the dependencies to ",(0,r.jsx)(n.code,{children:"ext/fast_strings/Cargo.toml"}),":"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-toml",children:'# ext/fast_strings/Cargo.toml\n[package]\nname = "fast_strings"\nversion = "0.1.0"\nedition = "2021"\n\n[dependencies]\nmagnus = "0.7"\nunicode-segmentation = "1.10"\n\n[lib]\nname = "fast_strings"\ncrate-type = ["cdylib"]\n'})}),"\n",(0,r.jsx)(n.p,{children:"Now, the Rust code:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-rust",children:'// ext/fast_strings/src/lib.rs\nuse magnus::{function, prelude::*, Error, Ruby};\nuse unicode_segmentation::UnicodeSegmentation;\n\n/// Reverses a string, correctly handling Unicode grapheme clusters.\nfn reverse_string(input: String) -> String {\n    input.graphemes(true).rev().collect()\n}\n\n#[magnus::init]\nfn init(ruby: &Ruby) -> Result<(), Error> {\n    let module = ruby.define_module("FastStrings")?;\n    module.define_singleton_method("reverse", function!(reverse_string, 1))?;\n    Ok(())\n}\n'})}),"\n",(0,r.jsx)(n.h3,{id:"why-this-approach",children:"Why this approach?"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Safety:"})," ",(0,r.jsx)(n.code,{children:"magnus"})," provides a safe API, avoiding ",(0,r.jsx)(n.code,{children:"unsafe"})," blocks and ensuring memory safety."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Correctness:"})," The ",(0,r.jsx)(n.code,{children:"unicode-segmentation"})," crate ensures that we correctly reverse strings with complex Unicode characters, like emoji."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Maintainability:"})," The code is clean, idiomatic Rust, making it easier to understand and maintain."]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-3-build-and-test",children:"Step 3: Build and Test"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install dependencies and compile:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle install\nbundle exec rake compile\n"})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Write a test:"}),"\nCreate a test file ",(0,r.jsx)(n.code,{children:"test/test_fast_strings.rb"})," to verify the implementation:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'# test/test_fast_strings.rb\nrequire "test_helper"\n\nclass TestFastStrings < Minitest::Test\n  def test_reverse_simple\n    assert_equal "dlrow olleh", FastStrings.reverse("hello world")\n  end\n\n  def test_reverse_unicode\n    assert_equal "\ud83e\udd80!dlroW ,olleH", FastStrings.reverse("Hello, World!\ud83e\udd80")\n  end\nend\n'})}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Run the tests:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle exec rake test\n"})}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"step-4-try-it-in-the-console",children:"Step 4: Try It in the Console"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"bundle exec bin/console\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ruby",children:'require "fast_strings"\n\nFastStrings.reverse("Hello, World! \ud83e\udd80")\n# => "\ud83e\udd80 !dlroW ,olleH"\n'})}),"\n",(0,r.jsx)(n.h2,{id:"what-youve-learned",children:"What You've Learned"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"You've created a Ruby gem with a Rust native extension."}),"\n",(0,r.jsxs)(n.li,{children:["You've written safe, performant, and correct Rust code using ",(0,r.jsx)(n.code,{children:"magnus"}),"."]}),"\n",(0,r.jsx)(n.li,{children:"You've learned how to handle Unicode strings properly."}),"\n",(0,r.jsx)(n.li,{children:"You've tested your gem to ensure it works as expected."}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["This ",(0,r.jsx)(n.code,{children:"quick-start"})," provides a solid foundation for building your own high-performance, reliable Ruby gems with Rust."]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>a});var s=t(6540);const r={},i=s.createContext(r);function l(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);